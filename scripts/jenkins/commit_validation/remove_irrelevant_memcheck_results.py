#!/usr/bin/env python

# Given a list of Valgrind memcheck files on the command line,
# delete any which were generated from programs which we consider
# irrevelant to our tests.

irrelevant_prefixes = ['/bin/', '/usr/bin']

import os
import sys
import xml.etree.ElementTree as ET

for xml_file in sys.argv[1:]:
    tree = ET.parse(xml_file)
    exe_name = tree.find('args/argv/exe').text
    for prefix in irrelevant_prefixes:
        if exe_name.startswith(prefix):
            print '''Info: removing memcheck file {0} \
                     generated by {1}'''.format(xml_file, exe_name)
            os.remove(xml_file)
